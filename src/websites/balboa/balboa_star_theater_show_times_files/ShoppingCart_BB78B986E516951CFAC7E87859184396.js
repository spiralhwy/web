function SessionsPage(){var i=new ListByFilmView,t,n;for($("#byFilmTab").click(function(){return selectTab("byFilmTab"),!1}),$("#byDateTab").click(function(){return selectTab("byDateTab"),!1}),i.render(),selectTab($("#tabs a").first().attr("id")),t=$(".poster-container"),n=0;n<t.length;n++)setupSlideShow($(t[n]).children(".poster-box"))}function setupSlideShow(n){n.length>1&&setInterval(runSlideShow,4e3,n)}function runSlideShow(n){for(var i=0,t=0;t<n.length;t++)if($(n[t]).is(":visible")){i=t+1;i>=n.length&&(i=0);$(n[t]).fadeOut("slow",function(){$(n[i]).fadeIn("slow")});break}}function selectTab(n){n==="byFilmTab"?($("#sessionsByDateConent").hide(),$("#sessionsByFilmConent").show(),$("#byDateTab").attr("aria-selected","false").parent().removeClass("selected").removeClass("highlight-background"),$("#byFilmTab").attr("aria-selected","true").parent().addClass("selected").addClass("highlight-background")):($("#sessionsByDateConent").show(),$("#sessionsByFilmConent").hide(),$("#byDateTab").attr("aria-selected","true").parent().addClass("selected").addClass("highlight-background"),$("#byFilmTab").attr("aria-selected","false").parent().removeClass("selected").removeClass("highlight-background"))}function ListByFilmView(){function n(n){return $(n.currentTarget).toggleClass("expanded").find(".future-text").text($(n.currentTarget).is(".expanded")?Language.SessionList_Hide:Language.SessionList_Show).end().parent().find(".date-container:not(:nth-of-type(1))").toggle("fast"),!1}this.render=function(){$("#sessionsByFilmConent").on("click",".show-future",n)}};
Countdown=function(n){function c(){(t=!0,clearInterval(r),i=$(n.container).find(".time"),i.length)&&(t=!1,f=new Date,o=n.timeoutUrl,e=n.duration,r=setInterval(u,s),u())}function u(){var o,n,u,s;t||(o=(new Date-f)/1e3,n=e-o,n<.5?(clearInterval(r),setTimeout(l,10)):(u=Math.floor(n/60),s=Math.floor(n-u*60),i.text(h(u)+":"+h(s))))}function l(){t||(t=!0,window.location=o)}function h(n){var i,t;for(n=""+(n||"0"),i=n.length,t=0;t<2-i;t++)n="0"+n;return n}var f,i,e,o,r,t=!1,s=500;this.start=function(){(i=$(n.container).find(".time"),i.length)&&(t=!1,f=new Date,o=n.timeoutUrl,e=n.duration,r=setInterval(u,s),u())};this.stop=function(){t=!0;clearInterval(r)};this.restart=function(t){n.duration=t;c()}};
function ShoppingCartControl(n){function e(){var n=50;$("header").length>0&&(n=$("header").height());$(".session-list-cart").css("top",n);$(window).scroll(function(){$(".session-list-cart").css("top",n)})}function r(){$("span[data-sessionid].delete-btn").click(function(){var n=parseInt($(this).attr("data-sessionid")),t=confirm(Language.CartItem_RemoveMessage);t===!0&&(n===i?u(n,f):u(n,o))});$("span.place-holder.bin-icon").click(function(){var n=parseInt(i);isNaN(n)||f()})}function u(i,r){$(".loading-image").show();$.ajax({type:"POST",url:n.removeFromCartUrl,data:JSON.stringify({sessionId:i,currentViewingFilm:t}),async:!0,headers:{PageInstanceId:n.pageInstanceId},contentType:"application/json; charset=utf-8",traditional:!0,success:r,error:function(n){var i="",t;try{t=JSON.parse(n.responseText);t.message?i=t.message:t.Message&&(i=t.Message)}catch(r){i=r}$(".loading-image").hide()},timeout:6e4})}function f(){var t=window.location.href;t=$(".in-basket").length>0?n.orderSummaryPageUrl:n.addShowRedirectionUrl;window.location=t}function o(i){t?($(".shopping-cart").replaceWith(i),r(),$(".loading-image").hide()):window.location=n.addShowRedirectionUrl}var s=this,h=n.removeFromCartUrl,t=n.currentViewingFilmTitle,i=n.sessionCode;this.init=function(){e();r()};init()};
